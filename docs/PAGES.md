# ページ一覧

## 認証ページ

| タイトル               | URL                     | 概要                                                                                                                             |
| ---------------------- | ----------------------- | -------------------------------------------------------------------------------------------------------------------------------- |
| ログイン               | `/auth/signin`          | メールアドレスとパスワードでログイン。認証成功後は役割に応じて管理者ダッシュボードまたは一般ユーザーダッシュボードにリダイレクト |
| パスワードリセット     | `/auth/forgot-password` | 登録済みメールアドレスを入力してパスワードリセットリンクを送信。送信完了後は確認画面を表示                                       |
| パスワードリセット完了 | `/auth/reset-password`  | パスワードリセットリンクからアクセスして新しいパスワードを設定                                                                   |
| 認証エラー             | `/auth/error`           | 認証処理中に発生したエラーを表示                                                                                                 |

## 公開ページ

| タイトル | URL | 概要                                                                                           |
| -------- | --- | ---------------------------------------------------------------------------------------------- |
| ホーム   | `/` | 認証状態をチェックし、適切なページにリダイレクト。未認証の場合はログインページへのリンクを表示 |

## メンバーページ（ログイン必要）

| タイトル         | URL                 | 概要                                                                                                                                   |
| ---------------- | ------------------- | -------------------------------------------------------------------------------------------------------------------------------------- |
| ダッシュボード   | `/member`           | **管理者**: プロフィール情報、ユーザー管理へのリンクを表示<br>**一般ユーザー**: プロフィール情報を表示 |
| ユーザー一覧     | `/member/users`     | **管理者**: 全ユーザーの一覧をテーブル形式で表示（メールアドレス、名前、役割、状態、作成日、操作ボタン）<br>**一般ユーザー**: 閲覧不可 |
| 新規ユーザー作成 | `/member/users/new` | **管理者**: 新しいユーザーアカウントを作成するフォーム（メールアドレス、名前、役割を設定可能）<br>**一般ユーザー**: 閲覧不可           |

## API エンドポイント

| エンドポイント              | メソッド | 概要                                                         |
| --------------------------- | -------- | ------------------------------------------------------------ |
| `/api/auth/[...nextauth]`   | GET/POST | NextAuth.js の認証 API。ログイン、ログアウト、セッション管理 |
| `/api/auth/forgot-password` | POST     | パスワードリセット用のメール送信 API                         |
| `/api/auth/reset-password`  | POST     | 新しいパスワードの設定 API                                   |
| `/api/member/users`         | GET      | ユーザー一覧取得 API（管理者のみ）                           |
| `/api/member/users`         | POST     | 新規ユーザー作成 API（管理者のみ）                           |
| `/api/member/users/[id]`    | PATCH    | ユーザー情報更新 API（管理者のみ）                           |
| `/api/member/users/[id]`    | DELETE   | ユーザー削除 API（管理者のみ）                               |

## 認証フロー

### ログイン時

1. `/` → 認証状態チェック
2. 未認証 → `/auth/signin`
3. 認証成功 → `/member`にリダイレクト（役割に応じて表示内容が変わる）

### ログアウト時

- 全ページ → `/auth/signin`

### 権限チェック

- 未認証ユーザーが`/member`にアクセス → `/auth/signin`にリダイレクト
- **管理者**: `/member`でプロフィール表示とユーザー管理機能へのリンク、`/member/users`でユーザー一覧表示、`/member/users/new`で新規ユーザー作成
- **一般ユーザー**: `/member`でプロフィール表示のみ、`/member/users`と`/member/users/new`は閲覧不可（リダイレクト）

## 技術仕様

- **フレームワーク**: Next.js 16.0.0
- **認証**: NextAuth.js v4
- **データベース**: Prisma + PostgreSQL
- **スタイリング**: CSS Modules
- **言語**: TypeScript
- **フォント**: Geist Sans, Geist Mono
- **レスポンシブ**: モバイル対応
- **テーマ**: ダークモード対応
